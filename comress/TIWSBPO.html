<!DOCTYPE html>

<html class="no-js">
    
    <head>
        <meta charset="utf-8">
            
            <title></title>
            <meta content="" name="description">
                <meta content="True" name="HandheldFriendly">
                    <meta content="320" name="MobileOptimized">
                        <meta content="width=device-width, initial-scale=1, minimal-ui" name="viewport">
                            <meta content="on" http-equiv="cleartype">
                                
                                <script src="js/vendor/modernizr-2.7.1.min.js"></script>
    </head>
    
    <body>
        <!-- Add your site or application content here -->
        
        <div id="columnchart_values" style="width: 100%; height: 100%">
        </div>
        <script src="js/vendor/jquery-2.1.0.min.js"></script>
        <script src="js/helper.js"></script>
        <script src="js/main.js"></script>
        <script src="js/lib.js"></script>
        <script src='https://www.google.com/jsapi' type='text/javascript'></script>
            <script type="text/javascript">
            google.load("visualization", "1", {
            packages: ["corechart"]
            });
            
            $(document).ready(function() {
            requestData("ewogICJzdGFydERhdGUiIDogIlwvRGF0ZSgxNDI5MDQ1NDk4MDAwKzA4MDApXC8iLAogICJlbmREYXRlIiA6ICJcL0RhdGUoMTQzMTY3NTI0MjAwMCswODAwKVwvIiwKICAidXJsIiA6ICJodHRwOlwvXC9jb21yZXNzdGVzdC5mbWl0LnNnXC9Db21yZXNzTVdDRlwvdjEuMDJcL1N1cnZleVwvUmVwb3J0LnN2Y1wvR2V0VG90YWxJc3N1ZVdpdGhTdGF0dXNCeVBPIiwKICAic2Vzc2lvbiIgOiAiMmYzZDEzY2MtMWFlMy00YTExLWE2ZDEtMDEwZGQ2NGRlM2FlIgp9");
            })
            
            function requestData(encodedJson) {
            var jsonObject = jSonise(encodedJson);
            
            $.ajaxSetup({
            beforeSend: function(xhr) {
            xhr.setRequestHeader('ComSessionId', jsonObject.session);
            }
            });
            $.ajax({
            type: "POST",
            url: jsonObject.url,
            data: JSON.stringify({
            "startDate": "" + jsonObject.startDate + "",
            "endDate": "" + jsonObject.endDate + ""
            }),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            crossDomain: true,
            success: function(result) {
            drawChart(result);
            },
            error: function(request, status, error) {
            alert("request error " + error);
            }
            });
            }
            
            function drawChart(jsonObject) {
            var IssueReportContainer = jsonObject.IssueReportContainer;
            
            var data = new google.visualization.DataTable();
            
            var headersArray = ['Contract type', 'Pending', 'Start', 'Stop', 'Completed', 'Close', 'Pending Overdue', 'Start Overdue', 'Stop Overdue', 'Completed Overdue', 'Close Overdue', 'Oustanding Overdue']
            
            data.addColumn('string',headersArray[0])
            data.addColumn('number',headersArray[1])
            data.addColumn('number',headersArray[2])
            data.addColumn('number',headersArray[3])
            data.addColumn('number',headersArray[4])
            data.addColumn('number',headersArray[5])
            
            data.addColumn('number',headersArray[6])
            data.addColumn('number',headersArray[7])
            data.addColumn('number',headersArray[8])
            data.addColumn('number',headersArray[9])
            data.addColumn('number',headersArray[10])
            data.addColumn('number',headersArray[11])
            
            //create rows
            var rows = [];
            for (i = 0; i < IssueReportContainer.length; i++) {
            var IssueReportContainerObj = IssueReportContainer[i];
            
            ContractTypeDes = IssueReportContainerObj['ContractTypeDes'];
            
            TotalComressPending = parseInt(IssueReportContainerObj['TotalComressPending'])
            TotalComressStart = parseInt(IssueReportContainerObj['TotalComressStart'])
            TotalComressStop = parseInt(IssueReportContainerObj['TotalComressStop'])
            TotalComressCompleted = parseInt(IssueReportContainerObj['TotalComressCompleted'])
            TotalComressClose = parseInt(IssueReportContainerObj['TotalComressClose'])
            
            TotalComressPendingOverdue = parseInt(IssueReportContainerObj['TotalComressPendingOverdue'])
            TotalComressStartOverdue = parseInt(IssueReportContainerObj['TotalComressStartOverdue'])
            TotalComressStopOverdue = parseInt(IssueReportContainerObj['TotalComressStopOverdue'])
            TotalComressCompletedOverdue = parseInt(IssueReportContainerObj['TotalComressCompletedOverdue'])
            TotalComressCloseOverdue = parseInt(IssueReportContainerObj['TotalComressCloseOverdue'])
            
            TotalComressOutstandingOverdue = parseInt(IssueReportContainerObj['TotalComressOutstandingOverdue'])
            
            data.addRows([
            [
            ContractTypeDes,
            TotalComressPending,
            TotalComressStart,
            TotalComressStop,
            TotalComressCompleted,
            TotalComressClose,
            TotalComressPendingOverdue,
            TotalComressStartOverdue,
            TotalComressStopOverdue,
            TotalComressCompletedOverdue,
            TotalComressCloseOverdue,
            TotalComressOutstandingOverdue
            
            ]
            ])
            
            };
            
            
            var view = new google.visualization.DataView(data);
            view.setColumns([
            0,
            1, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 1) > 0)
            return dt.getFormattedValue(row, 1);
            else
            return null
            },
            sourceColumn: 1,
            type: "string",
            role: "annotation"
            },
            
            2, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 2) > 0)
            return dt.getFormattedValue(row, 2);
            else
            return null
            },
            sourceColumn: 2,
            type: "string",
            role: "annotation"
            },
            
            3, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 3) > 0)
            return dt.getFormattedValue(row, 3);
            else
            return null
            },
            sourceColumn: 3,
            type: "string",
            role: "annotation"
            },
            
            4, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 4) > 0)
            return dt.getFormattedValue(row, 4);
            else
            return null
            },
            sourceColumn: 4,
            type: "string",
            role: "annotation"
            },
            
            5, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 5) > 0)
            return dt.getFormattedValue(row, 5);
            else
            return null
            },
            sourceColumn: 5,
            type: "string",
            role: "annotation"
            },
            
            6, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 6) > 0)
            return dt.getFormattedValue(row, 6);
            else
            return null
            },
            sourceColumn: 6,
            type: "string",
            role: "annotation"
            },
            
            7, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 7) > 0)
            return dt.getFormattedValue(row, 7);
            else
            return null
            },
            sourceColumn: 7,
            type: "string",
            role: "annotation"
            },
            8, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 8) > 0)
            return dt.getFormattedValue(row, 8);
            else
            return null
            },
            sourceColumn: 8,
            type: "string",
            role: "annotation"
            },
            9, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 9) > 0)
            return dt.getFormattedValue(row, 9);
            else
            return null
            },
            sourceColumn: 9,
            type: "string",
            role: "annotation"
            },
            10, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 10) > 0)
            return dt.getFormattedValue(row, 10);
            else
            return null
            },
            sourceColumn: 10,
            type: "string",
            role: "annotation"
            },
            11, {
            calc: function(dt, row) {
            if (dt.getFormattedValue(row, 11) > 0)
            return dt.getFormattedValue(row, 11);
            else
            return null
            },
            sourceColumn: 11,
            type: "string",
            role: "annotation"
            }
            ])
            
            var colorsArray = ["#ffc600","#c6ff00","#ff00de","#06ff00","#c2c2c2","#8b6e0b","#85a80c","#9b0a88","#097f06","#746f6f","#fb6892","#7b7474"];
            
            var options = {
            width: 700,
            height: 500,
            legend: {
            position: 'right',
            maxLines: 10
            },
            bar: {
            groupWidth: '95%'
            },
            isStacked: true,
            series: {
            0: {
            color: colorsArray[0]
            },
            1: {
            color: colorsArray[1]
            },
            2: {
            color: colorsArray[2]
            },
            3: {
            color: colorsArray[3]
            },
            4: {
            color: colorsArray[4]
            },
            5: {
            color: colorsArray[5]
            },
            6: {
            color: colorsArray[6]
            },
            7: {
            color: colorsArray[7]
            },
            8: {
            color: colorsArray[8]
            },
            9: {
            color: colorsArray[9]
            },
            10: {
            color: colorsArray[10]
            },
            11: {
            color: colorsArray[11]
            }
            }
            };
            
            var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
            chart.draw(view, options);
            
            
            //draw legend
            
            // for(i = 0; i < headersArray.length; i++)
            // {
            //     if(i > 0)
            //     {
            //         var li = "<li>"+headersArray[i]+"<span style='color:"+colorsArray[i-1]+";padding:5px'>&#9608;</span> <li/>"
            //         $("ul").append(li)
            //     }
            
            // }
            }
            </script>
            <div id="columnchart_values" style="width: 700px; height: 500px;"></div>
            <!-- <div id="legend" style="width: auto; height:100px;margin-left:130px;">
            <ul id="legendUl" style="list-style-type: none;display:inline-flex">
            </ul>
            </div> -->
            </body>
            
            </html>